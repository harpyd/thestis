---
author: Djerys
title: horns-and-hooves API test
description: declarative auto tests for horns-and-hooves API

stories:
  sell-horns-and-hooves:
    description: test for selling horns and hooves
    asA: seller
    inOrderTo: make sure that the product is being sold
    wantTo: sell horns and hooves on the test market place
    scenarios:
      sell-existing-horns-and-hooves:
        description: sell horns and hooves when they are in stock
        theses:
          deliver-horns:
            given: horns delivered to the warehouse
            http:
              method: POST
              url: https://api.warehouse/v1/horns
              request:
                contentType: application/json
                body:
                  producer: Horns Inc.
                  deliveryNumber: 123456
                  code: HRN-3134141
                  batchSize: 103
              response:
                allowedCodes: [ 201 ]
                allowedContentType: application/json

          deliver-hooves:
            given: hooves delivered to the warehouse
            http:
              method: POST
              url: https://api.warehouse/v1/hooves
              request:
                contentType: application/json
                body:
                  producer: Hooves Inc.
                  deliveryNumber: 654321
                  code: HVS-3123313
                  batchSize: 313
              response:
                allowedCodes: [ 201 ]
                allowedContentType: application/json

          sell-horns-and-hooves:
            when: selling horns and hooves
            http:
              method: POST
              url: https://api.warehouse/v1/sold
              request:
                contentType: application/json
                body:
                  products:
                    - code: HRN-3134141
                      itemsCount: 103
                      itemPrice: 1000
                    - code: HVS-3123313
                      itemsCount: 20
                      itemPrice: 1003
              response:
                allowedCodes: [ 201 ]
                allowedContentType: application/json

          get-sold-products:
            then: get sold products
            http:
              method: GET
              url: https://api.warehouse/v1/{{sell-horn-and-hooves.response.headers.Content-Location}}
              response:
                allowedCodes: [ 200 ]
                allowedContentType: application/json

          check-sold-products:
            then: check that products added to sold products
            assertion:
              type: JSON
              with: JSONPATH
              assert:
                'get-sold-products.response.body.products..itemsCount': [ 103, 21 ]